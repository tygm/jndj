{"version":3,"sources":["../../src/pages/login/login.module.ts","../../src/pages/login/login.ts"],"names":[],"mappings":"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","file":"18.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { LoginPage } from './login';\n\n@NgModule({\n  declarations: [\n    LoginPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(LoginPage),\n  ],\n})\nexport class LoginPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ts","import {Component} from '@angular/core';\r\nimport {IonicPage, NavController, NavParams, LoadingController, AlertController, App} from 'ionic-angular';\r\nimport {Http} from '@angular/http';\r\nimport 'rxjs/add/operator/map';\r\nimport {AppConfig} from '../../app/app.config';\r\nimport {TabsPage} from '../tabs/tabs';\r\n\r\n/**\r\n * Generated class for the LoginPage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage()\r\n@Component({\r\n    selector: 'page-login',\r\n    templateUrl: 'login.html',\r\n})\r\nexport class LoginPage {\r\n    login: string = AppConfig.getUrl() + \"/user/login\";\r\n    user: any = {loginname: \"\", pwd: \"\"}\r\n\r\n    constructor(public navCtrl: NavController, public navParams: NavParams, public http: Http, public loadingCtrl: LoadingController, public alertCtrl: AlertController, private app: App) {\r\n        localStorage.setItem('loginname', \"test\");\r\n        localStorage.setItem('password', \"111111\");\r\n        this.user = { loginname: localStorage.loginname, pwd: localStorage.password}\r\n    }\r\n\r\n    ionViewDidLoad() {\r\n        console.log('ionViewDidLoad LoginPage');\r\n\r\n    }\r\n\r\n    signin() {\r\n        let loading = this.loadingCtrl.create({\r\n            content: '加载中...'\r\n        });\r\n        loading.present();\r\n        return new Promise((resolve, reject) => {\r\n            this.http.post(this.login, null, {params: this.user})\r\n                .map(res => res.json())\r\n                .subscribe(data => {\r\n                    loading.dismiss();\r\n                    resolve(data)\r\n                    console.log(data)\r\n                    if (data.status) {\r\n                        if (data.data.djyLoginname && data.data.djyPassword && !data.djy) {\r\n                            let alert = this.alertCtrl.create({\r\n                                title: \"党建云模拟验证失败，请再试一次\"\r\n                            });\r\n                            alert.present();\r\n                        }else{\r\n                            localStorage.setItem('userid', data.data.id);\r\n                            localStorage.setItem('loginname', data.data.loginname);\r\n                            localStorage.setItem('nickname', data.data.nickname);\r\n                            localStorage.setItem('password', data.data.password);\r\n                            localStorage.setItem('partyNo', data.data.partyNo);\r\n                            localStorage.setItem('positionId', data.data.positionId);\r\n                            localStorage.setItem('djyPoints', data.data.djyPoints||\"0\");\r\n                            localStorage.setItem('xfwPoints', data.data.xfwPoints||\"0\");\r\n                            this.app.getRootNav().setRoot(TabsPage);\r\n                            if (data.djy) {\r\n                                localStorage.setItem('djycookie', data.djy.cookie);\r\n                                localStorage.setItem('djyuserName', data.djy.userName);\r\n                                localStorage.setItem('djydanwei', data.djy.danwei);\r\n                            }\r\n                            if (data.xfw) {\r\n                                localStorage.setItem('xfwcookie', data.xfw.cookie);\r\n                            }\r\n                        }\r\n                    } else {\r\n                        let alert = this.alertCtrl.create({\r\n                            title: data.msg\r\n                        });\r\n                        alert.present();\r\n                    }\r\n                }, err => {\r\n                    reject(err)\r\n                    loading.dismiss();\r\n                    console.log(err);\r\n                    let alert = this.alertCtrl.create({\r\n                        title: '服务器连接失败!'\r\n                    });\r\n                    alert.present();\r\n                })\r\n        })\r\n    }\r\n\r\n    signup() {\r\n        this.navCtrl.push(\"SignupPage\")\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts"],"sourceRoot":""}