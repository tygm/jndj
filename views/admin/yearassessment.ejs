<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<%- include("../common/header")%>

    <body>
        <div id="wrapper">
            <%- include('../common/nav'); %>
                <!-- /. NAV SIDE  -->
                <div id="page-wrapper">
                    <div class="header">
                        <h1 class="page-header">
                            工作考核
                            <small>工作考核，表中各个评分项对应Word文档中的顺序评分项</small>
                        </h1>
                    </div>

                    <div id="page-inner">
                        <div class="row">
                            <div class="col-md-12">
                                <!-- Advanced Tables -->
                                <div class="panel panel-default">
                                    <div class="panel-heading">
                                        <a class="btn cst_first btn-primary ">&lt;&lt;&lt;首页</a>
                                        <a class="btn cst_pre btn-primary ">&lt;上一页</a>
                                        <span id="pageInfo"></span>
                                        <a class="btn cst_next btn-primary ">下一页&gt;</a>
                                        <a class="btn cst_last btn-primary ">尾页&gt;&gt;&gt;</a>
                                    </div>
                                    <div class="panel-body">
                                        <div class="table-responsive">
                                            <table class="table table-striped table-bordered table-hover" id="dataTables-example">
                                                <thead>
                                                        <tr><th colspan="2"></th>
                                                            <th colspan="6">基层单位领导班子履行职责情况（20分）</th>
                                                            <th colspan="6">基层单位主要负责人履行职责情况（20分）</th>
                                                            <th colspan="4">基层单位领导班子其他成员履行职责情况（15分）</th>
                                                            <th colspan="2">推进标本兼治、源头治理情况（10分）</th>
                                                            <th colspan="4">加强专项治理推动情况（20分）</th>
                                                            <th colspan="2">反腐败情况（5分）</th>
                                                            <th>全面从严治党满意度测评（5分）</th>
                                                            <th>特色工作（5分）</th>
                                                        </tr>
                                                    <tr>
                                                        <th>提交人</th>
                                                        <th>总分</th>
                                                        <th title="研究部署全面从严治党工作情况 (2分)">评分项1</th>
                                                        <th title="制定清单和签订责任书 (3分)">评分项2</th>
                                                        <th title="加强全面从严治党宣传教育工作（5分）">评分项3</th>
                                                        <th title="报告主体责任落实情况（2分）">评分项4</th>
                                                        <th title="落实党内监督有关制度情况（4分）">评分项5</th>
                                                        <th title="支持、配合纪检监察机关工作情况(4分)">评分项6</th>
                                                        <th title="组织谋划部署情况（2分）">评分项7</th>
                                                        <th title="组织谋划部署情况（2分）">评分项8</th>
                                                        <th title="从严管理队伍情况（6分)">评分项9</th>
                                                        <th title="按时提交报告和参加述责述廉大会(2分)">评分项10</th>
                                                        <th title="带头执行有关制度情况(3分)">评分项11</th>
                                                        <th title="廉洁自律情况(5分)">评分项12</th>
                                                        <th title="清单制定和履责情况（2分）">评分项13</th>
                                                        <th title="清单制定和履责情况（2分）">评分项14</th>
                                                        <th title="推动检查定期报告(2分)">评分项15</th>
                                                        <th title="廉洁自律情况(5分)">评分项16</th>
                                                        <th title="加强制度建设（7分）">评分项17</th>
                                                        <th title="廉洁文化建设情况（3分）">评分项18</th>
                                                        <th title="落实中央八项规定精神、纠正“四风”情况（6分）">评分项19</th>
                                                        <th title="严肃整治不作为不担当问题的情况（7分）">评分项20</th>
                                                        <th title="开展扶贫助困领域腐败和作风问题专项治理（5分）">评分项21</th>
                                                        <th title="开展扫黑除恶专项斗争（2分）">评分项22</th>
                                                        <th title="支持和配合纪检监察部门查处违纪问题（3分）">评分项23</th>
                                                        <th title="办理信访举报工作情况（2分）">评分项24</th>
                                                        <th title="主要考核干部群众对各单位全面从严治党满意度（5分）">评分项25</th>
                                                        <th title="主要考核全区各部门结合全面深化改革各项任务，创新推进全面从严治党工作情况（5分）">评分项26</th>
                                                    </tr>
                                                </thead>
                                                <tbody class="tableBody">
                                                </tbody>
                                            </table>
                                        </div>

                                    </div>
                                </div>
                                <!--End Advanced Tables -->
                            </div>
                        </div>
                    </div>

                    <footer>
                        <%- include("../common/footer") %>
                    </footer>
                </div>
                <!-- /. PAGE INNER  -->
        </div>

        <%- include("../common/footerJs")%>

            <script>
                var pageSize = 10;
                var pageNo = 0;
                var total = 0;
                var totalPage = 0;
                var tpl = $(
                    '<tr class="odd gradeX"><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>'
                );

                function query() {
                    $.ajax({
                        "url": "/user/yearassessmentPage?pageNumber="+pageNo+"&pageSize=10",
                        success: function (data) {
                            var list=data.data;
                            $(".tableBody").html("");
                            for (var i = 0; i < list.length; i++) {
                                var tr = tpl.clone();
                                $("td", tr)[0].innerText = list[i].loginname;
                                $("td", tr)[1].innerText = list[i].total;
                                $("td", tr)[2].innerText = list[i].score1;
                                $("td", tr)[3].innerText = list[i].score2;
                                $("td", tr)[4].innerText = list[i].score3;
                                $("td", tr)[5].innerText = list[i].score4;
                                $("td", tr)[6].innerText = list[i].score5;
                                $("td", tr)[7].innerText = list[i].score6;
                                $("td", tr)[8].innerText = list[i].score7;
                                $("td", tr)[9].innerText = list[i].score8;
                                $("td", tr)[10].innerText = list[i].score9;
                                $("td", tr)[11].innerText = list[i].score10;
                                $("td", tr)[12].innerText = list[i].score11;
                                $("td", tr)[13].innerText = list[i].score12;
                                $("td", tr)[14].innerText = list[i].score13;
                                $("td", tr)[15].innerText = list[i].score14;
                                $("td", tr)[16].innerText = list[i].score15;
                                $("td", tr)[17].innerText = list[i].score16;
                                $("td", tr)[18].innerText = list[i].score17;
                                $("td", tr)[19].innerText = list[i].score18;
                                $("td", tr)[20].innerText = list[i].score19;
                                $("td", tr)[21].innerText = list[i].score20;
                                $("td", tr)[22].innerText = list[i].score21;
                                $("td", tr)[23].innerText = list[i].score22;
                                $("td", tr)[24].innerText = list[i].score23;
                                $("td", tr)[25].innerText = list[i].score24;
                                $("td", tr)[26].innerText = list[i].score25;
                                $("td", tr)[27].innerText = list[i].score26;
                                $(".tableBody").append(tr);
                            }
                            total = data.counts;
                            totalPage = Math.floor(total / pageSize);
                            if (total % pageSize == 0)
                                totalPage--;
                            $("#pageInfo").text("第" + (pageNo + 1) + "页,共" + (totalPage + 1) + "页，每页" +
                                pageSize + "条，共" + total + "条");
                            resetBtnState();
                        }
                    });
                }
                query();

                function resetBtnState() {
                    if (pageNo == totalPage) {
                        $(".cst_next").addClass("disabled");
                    } else {
                        $(".cst_next").removeClass("disabled");
                    }
                    if (pageNo == 0) {
                        $(".cst_pre").addClass("disabled");
                    } else {
                        $(".cst_pre").removeClass("disabled");
                    }
                }
                $(".cst_first").click(function () {
                    pageNo = 0;
                    query();
                    $("#pageInfo").text("第" + (pageNo + 1) + "页,共" + (totalPage + 1) + "页，每页" + pageSize +
                        "条，共" + total + "条");
                    resetBtnState();
                });

                $(".cst_pre").click(function () {
                    pageNo--;
                    pageNo = pageNo < 0 ? 0 : pageNo;
                    query();
                    $("#pageInfo").text("第" + (pageNo + 1) + "页,共" + (totalPage + 1) + "页，每页" + pageSize +
                        "条，共" + total + "条");
                    resetBtnState();
                })

                $(".cst_next").click(function () {
                    pageNo++;
                    pageNo = pageNo > totalPage ? totalPage : pageNo;
                    query();
                    $("#pageInfo").text("第" + (pageNo + 1) + "页,共" + (totalPage + 1) + "页，每页" + pageSize +
                        "条，共" + total + "条");
                    resetBtnState();
                })

                $(".cst_last").click(function () {
                    pageNo = totalPage;
                    query();
                    $("#pageInfo").text("第" + (pageNo + 1) + "页,共" + (totalPage + 1) + "页，每页" + pageSize +
                        "条，共" + total + "条");
                    resetBtnState();
                })
                $(document).ready(function () {
                    query();
                    resetBtnState();
                });
            </script>

            <!-- Custom Js -->
            <script src="../assets/js/custom-scripts.js"></script>


    </body>

</html>